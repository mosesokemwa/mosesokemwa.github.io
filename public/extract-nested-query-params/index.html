<!doctype html>
<html class="no-js" lang="en-us">
    
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="manifest" href="/manifest.json">

    
    <title>Extracting Nested Query Params &amp;middot; Moses Okemwa</title>

    <meta name="description" content="">
    <link rel="canonical" href="https://mosesokemwa.github.io/public/extract-nested-query-params/">

    <link rel="manifest" href="/manifest.json">
    <meta name="application-name" content="Extracting Nested Query Params &amp;middot; Moses Okemwa">
    <meta name="theme-color" content="#2271ff">

    <link rel="apple-touch-icon" sizes="57x57" href="fav/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="fav/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="fav/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="fav/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="fav/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="fav/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="fav/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="fav/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="fav/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="fav/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="fav/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="fav/favicon-16x16.png">

    

    
    <link rel="stylesheet" href="https://mosesokemwa.github.io/public/scss/main.min.ccb48d0472231db7a01d5dc09fb5a624ccfe6b850ad8ddd59d493619ae9f57e2.css" integrity="sha256-zLSNBHIjHbegHV3An7WmJMz&#43;a4UK2N3VnUk2Ga6fV&#43;I=" media="screen">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</head>

    <body>
        <div class="page">
            
<header>
    <nav class="navbar bg-mosesokemwa">
        
        <div class="container">
            <a class="navbar-brand" href="https://mosesokemwa.github.io/public/">
                <img src="https://mosesokemwa.github.io/public/images/profile.png" alt="Moses Okemwa" class="logo">
            </a>
        </div>
    </nav>
</header>


             
            <div id="main">
                

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">

    <link rel="manifest" href="/manifest.json">

    
    <title>Extracting Nested Query Params &amp;middot; Moses Okemwa</title>

    <meta name="description" content="">
    <link rel="canonical" href="https://mosesokemwa.github.io/public/extract-nested-query-params/">

    <link rel="manifest" href="/manifest.json">
    <meta name="application-name" content="Extracting Nested Query Params &amp;middot; Moses Okemwa">
    <meta name="theme-color" content="#2271ff">

    <link rel="apple-touch-icon" sizes="57x57" href="fav/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="fav/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="fav/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="fav/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="fav/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="fav/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="fav/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="fav/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="fav/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="fav/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="fav/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="fav/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="fav/favicon-16x16.png">

    

    
    <link rel="stylesheet" href="https://mosesokemwa.github.io/public/scss/main.min.ccb48d0472231db7a01d5dc09fb5a624ccfe6b850ad8ddd59d493619ae9f57e2.css" integrity="sha256-zLSNBHIjHbegHV3An7WmJMz&#43;a4UK2N3VnUk2Ga6fV&#43;I=" media="screen">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</head>

<ol class="breadcrumb">





<li class="breadcrumb-item">
    <a href="https://mosesokemwa.github.io/public/">Moses Okemwa</a>
</li>




<li class="breadcrumb-item active d-sm-none d-md-block">
Extracting Nested Query Params
</li>


</ol>

<article>
    <h1>Extracting Nested Query Params</h1>
    




<div>
    <time class="meta-date" datetime="2021-02-10">
    2021-02-10
    </time>
</div>
    <section id="content">
        <p>This is a very niche problem I was trying to solve.</p>
<pre tabindex="0"><code>/api/v1/data?url=https://mysite.com/blog/blopost1?callbackUrl=https://webhook.com/api/me
</code></pre><p>In this link I needed to get the url and nested call back query params, when parsed to the api data endpoint
All this was a scope-creep and needed to ebe solved in the shorted time possible</p>
<p>My take: NodeJs is powerful, you just need to know where to look(documentation) and who to consult(documentation)</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">const</span> url <span style="color:#666">=</span> require(<span style="color:#ba2121">&#39;url&#39;</span>); <span style="color:#408080;font-style:italic">//https://nodejs.org/api/url.html
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span><span style="color:#008000;font-weight:bold">const</span> querystring <span style="color:#666">=</span> require(<span style="color:#ba2121">&#39;querystring&#39;</span>); <span style="color:#408080;font-style:italic">// https://nodejs.org/api/querystring.html
</span></span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">let</span> rawUrl <span style="color:#666">=</span> ctx.query.url;
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">let</span> parsedUrl <span style="color:#666">=</span> url.parse(rawUrl);
</span></span><span style="display:flex;"><span><span style="color:#008000;font-weight:bold">let</span> parsedQs <span style="color:#666">=</span> querystring.parse(parsedUrl.query);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#408080;font-style:italic">// parsedQs = { callbackUrl: &#39;https://webhook.com/api/me&#39; }
</span></span></span></code></pre></div><p>After calling <code>url.parse(rawUrl)</code> on our URL, this is what is returned to us:</p>
<div class="highlight"><pre tabindex="0" style=";-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    protocol<span style="color:#666">:</span> <span style="color:#ba2121">&#39;https:&#39;</span>,
</span></span><span style="display:flex;"><span>    slashes<span style="color:#666">:</span> <span style="color:#008000;font-weight:bold">true</span>,
</span></span><span style="display:flex;"><span>    auth<span style="color:#666">:</span> <span style="color:#008000;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>    host<span style="color:#666">:</span> <span style="color:#ba2121">&#39;mysite.com&#39;</span>,
</span></span><span style="display:flex;"><span>    port<span style="color:#666">:</span> <span style="color:#008000;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>    hostname<span style="color:#666">:</span> <span style="color:#ba2121">&#39;mysite.com&#39;</span>,
</span></span><span style="display:flex;"><span>    hash<span style="color:#666">:</span> <span style="color:#008000;font-weight:bold">null</span>,
</span></span><span style="display:flex;"><span>    search<span style="color:#666">:</span> <span style="color:#ba2121">&#39;?callbackUrl=https://webhook.com/api/me&#39;</span>,
</span></span><span style="display:flex;"><span>    query<span style="color:#666">:</span> <span style="color:#ba2121">&#39;callbackUrl=https://webhook.com/api/me&#39;</span>,
</span></span><span style="display:flex;"><span>    pathname<span style="color:#666">:</span> <span style="color:#ba2121">&#39;/&#39;</span>,
</span></span><span style="display:flex;"><span>    path<span style="color:#666">:</span> <span style="color:#ba2121">&#39;/?page=2&amp;limit=3&#39;</span>,
</span></span><span style="display:flex;"><span>    href<span style="color:#666">:</span> <span style="color:#ba2121">&#39;https://mysite.com/blog/blopost1?callbackUrl=https://webhook.com/api/me&#39;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>While the actual act of retrieving this data is very simple, understanding where this info comes from and what it is can be confusing for some beginners. Hopefully this article cleared some things up for you.</p>

    </section>
    
    

</article>

            </div>
            
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-sm-12 text-center">
                    <p>Made with &hearts; in Nairobi &middot; 2024</p>
                    <p><a href="/public" target="_target">Home</a></p>
                    <p><a href="mailto:okemwamoses@gmail.com" target="_blank">Email</a></p>
                    <p><a href="https://github.com/mosesokemwa" target="_blank">Github</a></p>
                    <p><a href="https://linkedin.com/in/mosesokemwa/" target="_blank">LinkedIn</a></p>
                </div>
            </div>
        </div>
    </div>
</footer>

        </div>
    </body>

</html>